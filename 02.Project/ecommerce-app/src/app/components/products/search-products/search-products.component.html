<div class="relative">
  <!-- BARRA SUPERIOR TIPO CÃ“MIC -->
  <div class="bg-yellow-300 border-b-4 border-black sticky top-0 z-50 p-4 shadow-[4px_4px_0px_#000]">
    <div class="max-w-6xl mx-auto flex items-center gap-4">

      <!-- Imagen arriba izquierda -->
      <img 
        src="images/comic.jpg" 
        alt="logo comic"
        class="w-14 h-14 object-contain drop-shadow-[3px_3px_0px_#000]"
      />

      <!-- FORMULARIO -->
      <form [formGroup]="searchProductForm" class="flex-1 flex gap-3 items-center">

        <div class="flex-1 relative">
          <input
            type="text"
            formControlName="q"
            placeholder="Buscar productos..."
            (focus)="openDropdown()"      
            class="w-full px-4 py-3 border-4 border-black rounded-lg focus:ring-2 focus:ring-red-600 text-lg bg-white placeholder-black/60 shadow-[3px_3px_0px_#000]"
          />
        </div>

        <!-- FILTRO DE PRECIO -->
        <div class="flex gap-2 items-center text-black font-bold">
          <span class="text-sm hidden md:block">Precio</span>

          <input
            type="number"
            formControlName="minPrice"
            placeholder="Min"
            class="w-20 px-2 py-3 border-4 border-black rounded bg-white text-sm shadow-[3px_3px_0px_#000] placeholder-black/60"
          />

          <span class="text-black font-extrabold">-</span>

          <input
            type="number"
            formControlName="maxPrice"
            placeholder="Max"
            class="w-20 px-2 py-3 border-4 border-black rounded bg-white text-sm shadow-[3px_3px_0px_#000] placeholder-black/60"
          />
        </div>

      </form>
    </div>
  </div>

  <!-- RESULTADOS -->
  @if (dropdownOpen && searchProductForm.get('q')?.value && searchProductForm.get('q')?.value!.length>0) {   <!-- ðŸ”¥ AGREGADO -->
    <div class="absolute top-full left-0 right-0 z-40 bg-white border-4 border-black shadow-[5px_5px_0px_#000] max-w-6xl mx-auto">
      <div class="p-4">

        @if (products$ | async; as products ) {
          <div class="grid grid-cols-1 md:grid-cols-2 gap-2 max-h-60 overflow-y-auto">

            @for (product of products; track $index) {

            <!-- PRODUCTO -->
            <a 
              [routerLink]="['/product-view', product._id]"
              (click)="closeDropdown()"     
              class="flex items-center gap-3 p-2 hover:bg-yellow-200 border-2 border-black cursor-pointer rounded transition-all duration-150">
              
              <div class="w-14 h-14 bg-gray-300 border-2 border-black rounded"></div>

              <div class="flex-1 min-w-0">
                <h4 class="text-sm font-bold text-black truncate">{{product.name}}</h4>
                <p class="text-sm text-red-600 font-semibold">${{product.price}}</p>
              </div>

            </a>
            }
          </div>
        }
      </div>
    </div>
  }
</div>
