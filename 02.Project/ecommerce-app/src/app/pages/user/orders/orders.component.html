<div class="w-full">

  <!-- Loading -->
  <div *ngIf="loading" class="flex justify-center py-10">
    <div class="animate-spin rounded-full h-10 w-10 border-4 border-blue-600 border-t-transparent"></div>
  </div>

  <!-- No orders -->
  <div *ngIf="!loading && orders.length === 0" class="text-center py-12">
    <h2 class="text-xl font-semibold text-gray-700">No tienes órdenes aún</h2>
    <p class="text-gray-500 mt-2">Cuando compres algo, aparecerá aquí.</p>
  </div>

  <!-- Orders List -->
  <div *ngIf="!loading && orders.length > 0" class="space-y-6">

    <div *ngFor="let order of orders" 
         class="border rounded-lg shadow-sm bg-white p-6">
      
      <!-- Header -->
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-semibold">Orden #{{ order._id }}</h2>

        <span class="px-3 py-1 text-sm rounded-full font-medium"
          [ngClass]="{
            'bg-yellow-100 text-yellow-700': order.status === 'pending',
            'bg-green-100 text-green-700': order.status === 'completed',
            'bg-red-100 text-red-700': order.status === 'cancelled'
          }">
          {{ order.status | uppercase }}
        </span>
      </div>

      <!-- Products -->
      <div class="divide-y">
        <div *ngFor="let item of order.products" class="py-3 flex items-center justify-between">

          <div class="flex items-center gap-4">
            <img *ngIf="item.productId?.imageUrl?.length"
                 [src]="item.productId.imageUrl[0]"
                 class="w-16 h-20 object-cover rounded-md border" />

            <div>
              <p class="font-semibold">{{ item.productId?.name }}</p>
              <p class="text-sm text-gray-500">Cantidad: {{ item.quantity }}</p>
            </div>
          </div>

          <div class="font-semibold text-gray-800">
            {{ item.price * item.quantity | currency }}
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="mt-5 flex justify-between items-center border-t pt-4">
        <p class="text-gray-600 text-sm">
          Fecha: {{ order.createdAt | date:'medium' }}
        </p>

        <p class="text-xl font-bold text-blue-600">
          Total: {{ order.totalPrice | currency }}
        </p>
      </div>

    </div>

  </div>
</div>
